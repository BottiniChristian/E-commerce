<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Admin Login â€“ ShopEasy</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<div class="container d-flex justify-content-center align-items-center" style="height:100vh">
    <div class="card p-4 shadow" style="max-width: 400px; width:100%">
        <h3 class="text-center mb-3">Admin Login</h3>

        <div class="mb-3">
            <label class="form-label">Password amministratore</label>
            <input type="password" id="adminPassword" class="form-control">
        </div>

        <button id="loginBtn" class="btn btn-primary w-100">Accedi</button>

        <p id="loginError" class="text-danger text-center mt-3" style="display:none;">
            Password errata.
        </p>
    </div>
</div>

<script>
document.getElementById("loginBtn").addEventListener("click", async () => {
    const password = document.getElementById("adminPassword").value.trim();

    const res = await fetch("http://localhost:8080/api/admin/login?password=" + password, {
        method: "POST"
    });

    const data = await res.json();

    if (data.success) {
        localStorage.setItem("adminLogged", "true");
        window.location.href = "admin.html";
    } else {
        document.getElementById("loginError").style.display = "block";
    }
});
</script>

</body>
</html>
